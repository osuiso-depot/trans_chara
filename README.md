
---

# 📘 キャラクター翻訳辞書自動生成ツール 仕様書

---

## 🎯 目的

アニメ・ゲームキャラクターの英語表記（タグ名）を、正しい日本語表記へ自動翻訳するための辞書ファイルを構築する。
翻訳は主に **Wikipedia を活用した自動スクレイピング**によって行い、AI翻訳による誤訳や表記揺れを防止する。

---

## 📥 入力ファイル

### ファイル名：

`genre_4.txt`

### フォーマット（CSV）

1行につき1キャラクター情報を含む。

| 項目名  | 内容例           | 備考             |
| ---- | ------------- | -------------- |
| 英語名  | hatsune\_miku | アンダースコア付きのタグ形式 |
| ジャンル | 4             | 用途区分           |
| 使用数  | 106634        | 頻度など           |
| 関連タグ | /hm           | クオートやカンマ含むことあり |

### 入力例：

```
hatsune_miku,4,106634,/hm
kasane_teto,4,7148,
tainaka_ritsu,4,7229,
```

---

## 📤 出力ファイル

### ファイル名：

`genre_4_translated.csv`

### フォーマット（CSV）

元データに「日本語訳」を追加した形式：

| 英語名 | 日本語名 | ジャンル | 使用数 | 関連タグ |
| --- | ---- | ---- | --- | ---- |

### 出力例：

```
hatsune_miku,初音ミク,4,106634,/hm
kasane_teto,重音テト,4,7148,
tainaka_ritsu,田井中律,4,7229,
```

* `csv.writer` でカンマやクオートなどを安全に処理
* 日本語名が取得できなかった場合は空欄のままでもよい（ログ出力推奨）

---

## 🔍 翻訳方法の優先順位

### 優先度順に複数サイト・手法を検討（柔軟性あり）

| 優先 | 手段         | 内容                                   |
| -- | ---------- | ------------------------------------ |
| ①  | Wikipedia  | `wikipediaapi`で英語名→日本語名を取得（langlink） |
| ②  | Fallback構想 | 将来に備えPixiv百科、Fandom、MyAnimeList等を候補化 |
| ③  | Google検索   | 最終手段：検索結果上位から日本語名抽出                  |

※ サイト選択は将来的に**モジュール化・切替可能な設計**とする

---

## 🧠 内部処理仕様（処理フロー）

1. `genre_4.txt` を1行ずつ読み込み
2. `英語タグ` を整形して検索ワードに変換（例：`kasane_teto` → `Kasane Teto`）
3. Wikipedia英語ページを検索
4. 対応する **日本語ページが存在すれば** タイトルを抽出
5. 抽出結果を元の行に組み込んで、新CSVとして出力
6. 翻訳失敗／未ヒットはログに記録

---

## 🔧 技術スタック

| 分類  | 使用ライブラリ         | 用途       |
| --- | --------------- | -------- |
| CSV | `csv`           | 安全な入出力処理 |
| Web | `wikipediaapi`  | 言語リンクの取得 |
| ログ  | `logging` または手動 | 翻訳失敗行の記録 |
| 進捗  | `tqdm`（任意）      | プログレスバー  |
| その他 | `time.sleep()`  | アクセス制限対策 |

---

## ✅ 処理方針

* 一括処理ではなく、**逐次行単位で処理・出力**
* 日本語訳が取得できた時点で1行ずつ書き出し
* 処理中断時にも**部分的に辞書構築済みで再開可能**
* **将来的に他ジャンルにも適用可能**な構造にする

---

## 📝 今後の拡張予定（任意）

* 訳語キャッシュ機能（別ファイルに辞書形式で保存・再利用）
* エラーリスト再翻訳機能（失敗行のみ再処理）
* GUI化 or CLIツール化（進行状況表示など）

---

## 📎 まとめ

このツールにより、AI翻訳に依存せず、**正確で安定したキャラクター名翻訳**が可能になる。
今後の拡張も視野に入れた構造設計にすることで、ジャンル・作品数の増加にも柔軟に対応できる。

---
